(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var n=new(function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.ctx=null,this.platform=null,this.ball=null,this.blocks=[],this.rows=4,this.cols=8,this.sprites={background:null,ball:null,platform:null,block:null}}var i,r;return i=n,(r=[{key:"init",value:function(){this.ctx=document.getElementById("myCanvas").getContext("2d"),this.setEvents()}},{key:"setEvents",value:function(){var t=this;window.addEventListener("keydown",(function(e){" "===e.key?t.platform.fire():"ArrowRight"!==e.key&&"ArrowLeft"!==e.key||t.platform.start(e.key)})),window.addEventListener("keyup",(function(e){t.platform.stop()}))}},{key:"preload",value:function(t){var e=0,n=Object.keys(this.sprites).length,i=function(){++e>=n&&t()};for(var r in this.sprites)this.sprites[r]=new Image,this.sprites[r].src="./img/".concat(r,".png"),this.sprites[r].addEventListener("load",i)}},{key:"create",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.blocks.push({x:64*e+65,y:23*t+35})}},{key:"update",value:function(){this.platform.move(),this.ball.move()}},{key:"run",value:function(){var t=this;window.requestAnimationFrame((function(){t.update(),t.render(),t.run()}))}},{key:"render",value:function(){this.ctx.clearRect(0,0,640,360),this.ctx.drawImage(this.sprites.background,0,0),this.ctx.drawImage(this.sprites.ball,0,0,20,20,this.ball.x,this.ball.y,this.ball.width,this.ball.height),this.ctx.drawImage(this.sprites.platform,this.platform.x,this.platform.y);var t,n=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}(this.blocks);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.ctx.drawImage(this.sprites.block,i.x,i.y)}}catch(t){n.e(t)}finally{n.f()}}},{key:"start",value:function(){var t=this;this.init(),this.preload((function(){t.create(),t.run()}))}},{key:"random",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}}])&&t(i.prototype,r),n}());n.ball={velocity:3,dx:0,dy:0,x:320,y:280,width:20,height:20,start:function(){this.dy=-this.velocity,this.dx=n.random(-this.velocity,this.velocity)},move:function(){this.dy&&(this.y+=this.dy),this.dx&&(this.x+=this.dx)}},n.platform={velocity:6,dx:0,x:280,y:300,ball:n.ball,fire:function(){this.ball&&(this.ball.start(),this.ball=null)},start:function(t){"ArrowLeft"===t?this.dx=-this.velocity:"ArrowRight"===t&&(this.dx=this.velocity)},stop:function(){this.dx=0},move:function(){this.dx&&(this.x+=this.dx,this.ball&&(this.ball.x+=this.dx))}},window.addEventListener("load",(function(){n.start()}))})();